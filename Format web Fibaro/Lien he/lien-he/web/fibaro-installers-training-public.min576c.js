!function(e,t,a){"use strict";var n=e("[data-eventroot]");if(0!==n.length){window.dataLayer=window.dataLayer||[];var i={isLoading:!1,filters:{voivodeship:"all",city:"all",date:"all"},vshipsFilterReady:!1,vshipSelected:!1,citySelected:!1,dateSelected:!1},s={currentData:null,vshipOptions:[],cityOptions:[],dateOptions:[]},r={signup:"Jetzt anmelden",cantfind:"Sie haben keine passende Schulung in Ihrer Umgebung gefunden?",contactus:"Kontaktieren Sie uns",choosespec:"Wählen Sie die Branche",voivodeships:{badenwurttemberg:"Baden-Württemberg",bayern:"Bayern",berlin:"Berlin",brandenburg:"Brandenburg",bremen:"Bremen",hamburg:"Hamburg",hessen:"Hessen",macklenburgvorpommern:"Mecklenburg-Vorpommern",niedersachsen:"Niedersachsen",nordrheinwestfalen:"Nordrhein-Westfalen",rheinlandpfalz:"Rheinland-Pfalz",saarland:"Saarland",sachsen:"Sachsen",sachsenanhalt:"Sachsen-Anhalt",schleswigholstein:"Schleswig-Holstein",thuringen:"Thüringen",swiss:"Swiss",oesterreich:"Oesterreich",zurich:"Zürich",bern:"Bern",luzern:"Luzern",uri:"Uri",schwyz:"Schwyz",obwalden:"Obwalden",nidwalden:"Nidwalden",glarus:"Glarus",zug:"Zug",staatfreiburg:"Staat Freiburg",solothurn:"Solothurn",baselstadt:"Basel-Stadt",basellandschaft:"Basel-Landschaft",schaffhausen:"Schaffhausen",appenzellausserrhoden:"Appenzell Ausserrhoden",appenzellinnerrhoden:"Appenzell Innerrhoden",stgallen:"St. Gallen",graubunden:"Graubünden",aargau:"Aargau",thurgau:"Thurgau",tessin:"Tessin",waadt:"Waadt",wallis:"Wallis",neuenburg:"Neuenburg",genf:"Genf",jura:"Jura",burgenland:"Burgenland",karnten:"Kärnten",niederosterreich:"Niederösterreich",oberosterreich:"Oberösterreich",salzburg:"Salzburg",steiermark:"Steiermark",tirol:"Tirol",vorarlberg:"Vorarlberg",wien:"Wien"}};n.on("filters:voivodeship",function(e,t){i.filters.voivodeship=t,i.filters.city="all",i.filters.date="all",i.citySelected=!1,i.dateSelected=!1}).on("filters:city",function(e,t){i.filters.city=t,i.filters.date="all",i.citySelected="all"!==t}).on("filters:date",function(e,t){i.filters.date=t,i.dateSelected="all"!==t}).on("filters:voivodeship filters:city filters:date",function(){n.trigger("state:update"),T()}).on("state:update",function(){D()}).on("data:change",function(){N()});var o="https://www.fibaro.com/de/wp-json/wp/v2",d=e.getJSON(o+"/training-events-de?per_page=100"),l=n.find(".content.filters"),c=e("#el-s-voivodeship"),p=e("#el-s-city"),f=e("#el-s-date");e("#filter-toggle").on("click",function(e){e.preventDefault(),n.toggleClass("filters-active")});var u=e("#event-steps"),h=e("#event-list"),v='<div class="event-item last-item">';v+='<div class="cant-find">'+r.cantfind+"</div>",v+='<div class="contact-us"><a href="https://www.fibaro.com/de/contact/">'+r.contactus+"</a></div>",v+="</div>",e("#close-events, #lp-b-confirmation").on("click",function(){n.fadeOut(250,function(){I(),M(),y.slideTo(0),e(".swiper-slide.slide1").css({height:"auto",overflow:"auto"})}),e("body").css({overflow:"auto",height:"auto",position:"relative"})}),c.chosen({disable_search:!0,width:"100%"}),p.chosen({disable_search:!0,width:"100%"}),f.chosen({disable_search:!0,width:"100%"});var g=e("#event-form"),m=e(".wpcf7");g.find("select").chosen({disable_search:!0,width:"100%"}).on("change",function(e){"inna"===e.currentTarget.value?b.show():b.hide(),y.update()});var b=e('input[name="specialization-other"]').parents("p");b.hide(),m.on("wpcf7mailsent",function(t){e.each(t.detail.inputs,function(t,a){"email"===a.name&&e("#event-confirmation").find(".conf p span").text(a.value)}),e("body").scrollTop(0),n.animate({scrollTop:0},150,function(){y.slideTo(2)}),grecaptcha.reset(),window.dataLayer.push({event:"formSent",eventCategory:"Installers Form",eventAction:"Send",eventLabel:"Form Sent"}),fbq("init","123380761680038"),fbq("track","PageView"),fbq("track","Lead")}).on("wpcf7invalid wpcf7submit wpcf7mailfailed",function(){y.update()});var y=new t("#event-steps",{simulateTouch:!1,allowTouchMove:!1,speed:250,autoHeight:!0,roundLengths:!0,effect:"fade",pagination:{el:".swiper-pagination",type:"progressbar",hideOnClick:!1}}),w=e("#steps-wrapper").find(".step");y.on("slideChange",function(){0===this.activeIndex&&(a.mq("screen and (min-width: 1200px)")&&n.find(".form-bot").animate({marginTop:"+=40"},250),l.fadeIn(250),w.removeClass("active done"),w.eq(0).addClass("active"),e("#filter-toggle").css({display:"flex"}),e("#close-events").css({display:"flex"}),e("#back-to-list").css({display:"none"})),1===this.activeIndex&&(w.removeClass("active done"),w.eq(0).addClass("done"),w.eq(1).addClass("active"),n.removeClass("filters-active"),e("#filter-toggle").css({display:"none"}),e("#close-events").css({display:"none"}),e("#back-to-list").css({display:"flex"})),2===this.activeIndex&&(w.removeClass("active done"),w.eq(0).addClass("done"),w.eq(1).addClass("done"),w.eq(2).addClass("active"),e("#back-to-list").css({display:"none"})),0!==this.activeIndex&&l.fadeOut(250)}),e("#back-to-list").on("click",function(t){t.preventDefault(),e("body").scrollTop(0),e(".swiper-slide.slide1").css({height:"auto",overflow:"auto"}),n.animate({scrollTop:0},150,function(){y.slideTo(0)})});var S=n.find(".loader"),x={months:[["Januar","Januar"],["Februar","Februar"],["März","März"],["April","April"],["Mai","Mai"],["Juni","Juni"],["Juli","Juli"],["August","August"],["September","September"],["Oktober","Oktober"],["November","November"],["Dezember","Dezember"]],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],getDatesRange:function(e){var t=e.split("-"),a="31";switch(parseInt(t[1],10)){case 2:a="29";break;case 4:case 6:case 9:case 11:a="30"}return[t[0]+"-"+t[1]+"-01",t[0]+"-"+t[1]+"-"+a]},getMonthName:function(e,t){return t?x.months[parseInt(e)-1][1]:x.months[parseInt(e)-1][0]},getDayName:function(e){return x.days[new Date(e).getDay()]}},O=e("#installers-training").find('select[name="specialization"]');O.find("option").eq(0).text(r.choosespec),O.trigger("chosen:updated"),d.done(function(e){C(e),k(),z(),c.on("change",function(){n.trigger("filters:voivodeship",[c.val()])}),p.on("change",function(){n.trigger("filters:city",[p.val()])}),f.on("change",function(){n.trigger("filters:date",[f.val()])})})}function T(){i.isLoading=!0,c.prop("disabled",!0).trigger("chosen:updated"),p.prop("disabled",!0).trigger("chosen:updated"),f.prop("disabled",!0).trigger("chosen:updated"),I(),M();var t="?per+page=100&";return"all"!==i.filters.voivodeship&&(t+="voivodeship="+i.filters.voivodeship+"&"),"all"!==i.filters.city&&(t+="city="+i.filters.city+"&"),"all"!==i.filters.date&&(t+="date="+i.filters.date+"&"),e.getJSON(o+"/training-events-de"+t,function(e){s.currentData=e,i.isLoading=!1,n.trigger("data:change")})}function k(){var t=e("#lp-s-voivodeship"),a=e("#lp-b-checkdates");t.chosen({disable_search:!0}),t.append(s.vshipOptions),t.prop("disabled",!1).trigger("chosen:updated"),a.prop("disabled",!1),t.on("change",function(){n.trigger("filters:voivodeship",[t.val()])}),a.on("click",function(t){t.preventDefault(),i.filters.city="all",i.filters.date="all",p.val(i.filters.city),f.val(i.filters.date),function(){if(n.fadeIn(250),i.isLoading)return;e("body").css({overflow:"hidden",height:"100vh",position:"fixed"}),T().done(function(){q(),N()})}(),window.dataLayer.push({event:"formView",eventCategory:"Installers Form",eventAction:"View",eventLabel:"Form Opened"})}),n.on("state:update",function(){t.val(i.filters.voivodeship)})}function C(t){var a,n,o,d,l,c,p,f,u,h,v,g,m;i.vshipsFilterReady||(s.vshipOptions=(a=t,o=r.voivodeships,d=[],l="",e.each(a,function(e,t){d.push(t.acf.voivodeship)}),n=d.filter(function(e,t,a){return a.indexOf(e)>=t}).sort(),e.each(n,function(e,t){l+='<option value="'+t+'">'+o[t]+"</option>"}),l)),i.citySelected||(s.cityOptions=(c=t,f=[],u="",e.each(c,function(e,t){f.push(t.acf.city)}),p=f.filter(function(e,t,a){return a.indexOf(e)>=t}).sort(),e.each(p,function(e,t){u+='<option value="'+t+'">'+t+"</option>"}),u)),i.dateSelected||(s.dateOptions=(h=t,g=[],m="",e.each(h,function(e,t){var a=t.acf.date.split("-");g.push(a[0]+"-"+a[1])}),v=g.filter(function(e,t,a){return a.indexOf(e)>=t}).sort(),e.each(v,function(e,t){var a=t.split("-");m+='<option value="'+x.getDatesRange(t)+'">'+x.getMonthName(a[1])+" "+a[0]+"</option>"}),m))}function z(){c.append(s.vshipOptions),c.val(i.filters.voivodeship).trigger("chosen:updated"),i.vshipsFilterReady=!0,p.append(s.cityOptions),p.val(i.filters.city).trigger("chosen:updated"),f.append(s.dateOptions),f.val(i.filters.date).trigger("chosen:updated")}function D(){c.find("option:not([data-default])").remove(),p.find("option:not([data-default])").remove(),f.find("option:not([data-default])").remove(),z()}function N(){h.empty(),e.each(s.currentData,function(t,a){h.append(function(t,a){var n=a.acf.date.split("-"),i=e("<div>").addClass("event-item").attr("data-event",t),s=e("<div>").addClass("date clearfix").appendTo(i);e("<div>").addClass("day").text(n[2]).appendTo(s),e("<div>").addClass("weekday").text(x.getDayName(a.acf.date)).appendTo(s),e("<div>").addClass("monthyear").text(x.getMonthName(n[1],!0)+", "+n[0]).appendTo(s);var o=e("<div>").addClass("location").appendTo(i);return e("<div>").addClass("city").text(a.acf.city).appendTo(o),e("<div>").addClass("address").text(a.acf.address).appendTo(o),e("<a>").attr("href","javascript:").text(r.signup).appendTo(i).on("click",L),i}(t,a))}),h.append(e(v)),C(s.currentData),D(),c.prop("disabled",!1).trigger("chosen:updated"),p.prop("disabled",!1).trigger("chosen:updated"),f.prop("disabled",!1).trigger("chosen:updated"),q(),u.fadeIn(250),y.update()}function I(){u.fadeOut(250)}function L(t){t.preventDefault(),function(t){var a=t.acf.date.split("-"),n=e(".event-details");e.each(t.acf.agenda,function(e,t){"<li>"+t.topic+"</li>"}),"</ul>";var i=x.getDayName(t.acf.date);n.find(".day").text(a[2]),n.find(".weekday").text(i),n.find(".monthyear").text(x.getMonthName(a[1],!0)+", "+a[0]),n.find(".city").text(t.acf.city),n.find(".address").text(t.acf.address),n.find(".amount").text(t.acf.price+"€");var s=t.acf.city+", "+t.acf.address,r=a[2]+" "+x.getMonthName(a[1],!0)+" "+a[0]+" ("+i+")";(d=t.acf.event_partner,e.getJSON(o+"/training-partners-de/"+d)).done(function(e){g.find('input[name="prname"]').val(e.acf.name),g.find('input[name="premail"]').val(e.acf.email),g.find('input[name="prtel"]').val(e.acf.phone),g.find('input[name="prplace"]').val(s),g.find('input[name="prdate"]').val(r)});var d}(s.currentData[e(this).parent().data("event")]),e("body").scrollTop(0),e(".swiper-slide.slide1").css({height:"1px",overflow:"hidden"}),n.animate({scrollTop:0},150,function(){a.mq("screen and (min-width: 1200px)")&&n.find(".form-bot").animate({marginTop:"-=40"},250),y.slideTo(1)})}function M(){S.fadeIn(250)}function q(){S.fadeOut(250)}}(jQuery,Swiper,Modernizr);